// Predefined bus schedule in HH:MM format
const busSchedule = ["05:30", "05:44", "05:58", "06:12", "06:24", "06:40",'06:52', '07:06', '07:20', '07:34', '07:48', '08:02', 
    '08:16', '08:30', '08:44', '08:58', '09:12', '09:26', '09:40', '09:54', '10:08', '10:22', '10:36', '10:50', '11:04', '11:18', 
    '11:32', '11:46', '12:00', '12:14', '12:28', '12:42', '12:56', '13:10', '13:24', '13:38', '13:52', '14:06', '14:20', '14:34', 
    '14:48', '15:02', '15:16', '15:30', '15:44', '15:58', '16:12', '16:26', '16:40', '16:54', '17:08', '17:30',"18:00","18:26",
    "18:40","18:54","18:20","19:50,","20:46"];

    // Function to find the next bus
    function findNextBus() {
        const userTimeInput = document.getElementById('userTime').value;

        if (!userTimeInput) {
            document.getElementById('result').textContent = 'Моля въведете валидно време.';
            return;
        }

        const nextBus = busSchedule.find(busTime => busTime >= userTimeInput);

        if (nextBus) {
            document.getElementById('result').textContent = `Следващия автобус е в ${nextBus}.`;
        } else {
            document.getElementById('result').textContent = 'Няма повече автобуси днес.';
        }
    }
    var map = L.map('map').setView([42.1354, 24.7453], 13);

    // Add the OpenStreetMap tile layer
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // Define the bus route (example coordinates)
var busRoute = [[42.15943917647903,24.78142170272436,0],
    [42.15953678721128,24.78158610002005,0],
    [42.15965216308,24.78175436067498,0],
    [42.15971410545074,24.78211035728953,0],
    [42.15971950991838,24.78261535769084,0],
    [42.1595530684665,24.78601871994576,0],
    [42.15905642525574,24.78922949557565,0],
    [42.15896897741877,24.78925014967906,0],
    [42.15737967878512,24.78847574141171,0],
    [42.15675705433737,24.79051035814554,0],
    [42.15669463780229,24.79064381723338,0],
    [42.15659526389402,24.7906668397434,0],
    [42.15570740687436,24.79026218946336,0],
    [42.15459428449523,24.78976132844274,0],
    [42.15353541390677,24.78954419380572,0],
    [42.15252611674215,24.78940260843698,0],
    [42.15273587430574,24.78691374344525,0],
    [42.15134403378718,24.78669777684483,0],
    [42.14950290778993,24.78645661956343,0],
    [42.14863374574342,24.78634519224126,0],
    [42.14875305816248,24.78521603830059,0],
    [42.14883078603273,24.78392193959533,0],
    [42.14900188251129,24.78274926675286,0],
    [42.14936420324199,24.77679756926715,0],
    [42.14919740814834,24.7748183534669,0],
    [42.14829740947267,24.77034924176279,0],
    [42.14700957867757,24.76303531434389,0],
    [42.14255843920787,24.76299487125853,0],
    [42.13952413045576,24.76290818239492,0],
    [42.13665449046773,24.76287915813442,0],
    [42.13637412899604,24.7628331154431,0],
    [42.13625962793566,24.76271191529185,0],
    [42.13618593348257,24.76254349100761,0],
    [42.13628506871364,24.75686846799845,0],
    [42.13631941816225,24.75195421365311,0],
    [42.13601488995636,24.74975648406947,0],
    [42.13577936087531,24.74752921295347,0],
    [42.13564164956356,24.7464408981974,0],
    [42.1355487557542,24.74555124221551,0],
    [42.13538768527141,24.74505795460841,0],
    [42.13509064738183,24.74492184898921,0],
    [42.13433296323934,24.74497374014959,0],
    [42.13169225278619,24.74486029777833,0],
    [42.13033517491228,24.74239382347447,0],
    [42.12710986248165,24.74208002831983,0],
    [42.12654325088169,24.742507416878,0],
    [42.12650027587573,24.7462381360599,0],
    [42.1262722817732,24.75145154576052,0],
    [42.12609164691138,24.75466543397696,0],
    [42.12597069857331,24.75511432737139,0],
    [42.12292643182791,24.75451859642348,0],
    [42.12282557359967,24.75044280756101,0],
    [42.12254298743006,24.74785697870082,0],
    [42.12285000064068,24.74457911369679,0],
    [42.12341254366044,24.74267732857335,0],
    [42.12370847687076,24.74081295097992,0],
    [42.12413123828127,24.73369160552509,0],
    [42.12641966643473,24.73104517567785,0],
    [42.12701039493339,24.7277794703283,0],
    [42.12771969217191,24.72267014257892,0],
    [42.12918824188024,24.71995574365968,0],
    [42.12552738379502,24.72020196154982,0],
    [42.12544841003312,24.72023742348457,0],
    [42.12528068162667,24.72032813882393,0],
    [42.12518974048796,24.72048841335038,0],
    [42.12515340154052,24.72063290796931,0],
    [42.12517913304714,24.72078392838458,0],
    [42.12519739534108,24.72084815371919,0],
    [42.12531998444412,24.7202168620366,0],
    [42.12556210099734,24.72150217142125,0],
    [42.12723010863143,24.72291216741427,0],
    [42.1289713879743,24.72900179036913,0],
    [42.12727263699199,24.73129338253557,0],
    [42.12684427503399,24.7335856238985,0],
    [42.12635345608517,24.73502029697276,0],
    [42.12587784087203,24.73646969676065,0],
    [42.12544657788067,24.74076540061248,0],
    [42.12399693245035,24.744100491489,0],
    [42.12330521715752,24.75021191927168,0],
    [42.12241979622175,24.75157875507662,0],
    [42.12239098237609,24.75350877770014,0],
    [42.12260432850629,24.75536234086398,0],
    [42.12275064961564,24.75484145021372,0],
    [42.12606269840743,24.75451859642348,0],
    [42.12616874192646,24.75238655206776,0],
    [42.12625378206396,24.74990317250493,0],
    [42.1263658947265,24.74642218902948,0],
    [42.12660496131407,24.74227516785508,0],
    [42.13041158100264,24.74433193788539,0],
    [42.13173254430281,24.74496175745399,0],
    [42.13278551027052,24.7449898493254,0],
    [42.13385910262824,24.74506346798015,0],
    [42.13470444380945,24.74507420301781,0],
    [42.13510881062918,24.74507053103066,0],
    [42.13523997382649,24.74524298511571,0],
    [42.13532463639898,24.74571022973053,0],
    [42.13546508112486,24.74649111505143,0],
    [42.13558020625572,24.74735496921533,0],
    [42.13589346109097,24.74948237309264,0],
    [42.13597838027371,24.75048128344317,0],
    [42.13619834306636,24.75194930518688,0],
    [42.13623410731464,24.75240809881285,0],
    [42.13610318068358,24.7623665763571,0],
    [42.13612126814024,24.76287147555101,0],
    [42.13617301936834,24.76321631439399,0],
    [42.13630510651017,24.7632078178301,0],
    [42.13663896219754,24.76309779074838,0],
    [42.1382163387787,24.76310789541808,0],
    [42.13953821340943,24.76316377629752,0],
    [42.14031169441506,24.76316487404505,0],
    [42.14108303616162,24.76322159669889,0],
    [42.14261925159822,24.76322912251853,0],
    [42.14476236349635,24.76323336580921,0],
    [42.14690984864273,24.76325914925186,0],
    [42.14805086965313,24.77037749973636,0],
    [42.14881009128914,24.77424710472133,0],
    [42.14898683547246,24.77655784038203,0],
    [42.14884364923326,24.77932971824635,0],
    [42.1486480864631,24.78290044402527,0],
    [42.14864946043868,24.7840970732709,0],
    [42.14852697387578,24.78643596920083,0],
    [42.15058912840621,24.78673945756898,0],
    [42.15266721039243,24.7871241318664,0],
    [42.15246905938589,24.78871093575574,0],
    [42.15239722555918,24.7895319068656,0],
    [42.15359393666854,24.78968929448038,0],
    [42.15452202101717,24.7904231375313,0],
    [42.15529088861732,24.79062454196429,0],
    [42.1564300845826,24.79085228462606,0],
    [42.1568134925243,24.79136669231796,0],
    [42.15716964913491,24.79180412830343,0],
    [42.1581602538902,24.79185975599362,0],
    [42.1590616441335,24.79192013252455,0],
    [42.15975383807129,24.79193123545884,0],
    [42.1600528353856,24.79220085994365,0],
    [42.16020163423552,24.79275306660116,0],
    [42.16047297454262,24.79306345903975,0],
    [42.1607378367657,24.79346284562867,0],
    [42.16102290558756,24.7939874013255,0],
    [42.16136168743245,24.79441542357469,0],
    [42.16180141574619,24.79466983454347,0],
    [42.16240670287012,24.79506522720202,0],
    [42.16304181210239,24.79560027449607,0],
    [42.16325402957989,24.79609132726152,0],
    [42.16374667242809,24.79656487722952,0],
    [42.1641890724951,24.79712836402262,0],
    [42.16472894560919,24.79771333924428,0],
    [42.16512787855223,24.79812679857449,0],
    [42.1653044081787,24.79841622677552,0],
    [42.16540320564979,24.79877186998258,0],
    [42.16566607371585,24.79921051571357,0],
    [42.16586143972393,24.79953011971539,0],
    [42.1660163480597,24.79981280938591,0],
    [42.16621600407346,24.80021408952065,0],
    [42.16639654600745,24.80055141196862,0]];


// Create a polyline for the bus route and add it to the map
L.polyline(busRoute, {color: 'red'}).addTo(map);
