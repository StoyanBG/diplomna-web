<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complaints and Responses</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="css/main1.css">
    <link rel="stylesheet" href="css/navFirst.css">
    <link rel="stylesheet" href="css/complaints.css">
    <script src="scipts/scriptNavF.js" defer></script>
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <a href="index.html"><h1>Пловдив транспорт</h1></a>
            </div>
            <button class="hamburger" aria-label="Toggle navigation">
                ☰
            </button>
            <ul class="nav-links">
                <li><a href="allLines.html" id="main-page-button">Всички линии</a></li>
                <li><a onclick="redirectToComplaintPage()">Съобщете за проблем</a></li>
                <li><a href="feedback.html">Свържете се с нас</a></li>
                <li><a href="login.html">Влизане</a></li>
                <li><a href="registration.html">Регистрация</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="real-time-info">
            <section class="complaints">
                <h2>Подадени проблеми и отговори</h2>
                <ul id="complaintsList" class="complaints-list">
                    <!-- Complaints will be loaded here -->
                </ul>
            </section>
            
            <form id="responseForm" class="response-form" style="display: none;">
                <h3>Отговорете на проблем</h3>
                <div class="mb-3">
                    <label for="response" class="form-label">Отговор:</label>
                    <textarea id="response" name="response" class="form-control" rows="4" required></textarea>
                </div>
                <input type="hidden" id="messageId" name="messageId" required>
                <button type="submit" class="btn btn-primary">Изпратете отговор</button>
            </form>
            
            <div id="responseStatus"></div>
        </section>

        <!-- Delete Modal -->
        <div id="deleteModal" class="modal" style="display: none;">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Изтрийте проблема</h5>
                        <button type="button" class="btn-close" aria-label="Close" onclick="closeDeleteModal()"></button>
                    </div>
                    <div class="modal-body">
                        <p>Моля, въведете паролата, за да изтриете този проблем.</p>
                        <input type="hidden" id="deleteComplaintId">
                        <div class="mb-3">
                            <label for="secretPassword" class="form-label">Парола:</label>
                            <input type="password" id="secretPassword" class="form-control" placeholder="Въведете паролата" required>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeDeleteModal()">Отказ</button>
                        <button type="button" class="btn btn-danger" onclick="deleteComplaint()">Изтрий</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <ul class="footer-links">
            <li><a href="/privacy.html">Политика за поверителност</a></li>
            <li><a href="/feedback.html">Свържете се с нас</a></li>
        </ul>
        <hr>
        <p>&copy; 2024 Пловдив транспорт. Всички права са запазени.</p>
    </footer>

    <script src="scipts/comlpaint.js" defer></script>
</body>
</html>
